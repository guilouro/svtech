
/*
 * -------------------------------------------------------
 * Project: Project Title
 * Version: 0.1.0
 * Author:  Author name (author@email.com)
 *
 * Copyright (c) 2015 Project Title
 * -------------------------------------------------------
 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){angular.module("svApp").controller("PriorityController",["$scope","$http","$state","Auth",function(a,b,c,d){a.products={},a.select_all=!1,b.get("/list/").success(function(b){a.products=b.products}),a.setPriority=function(){b.post("/setpriority/",{products:a.products}).then(function(a){})},a.checkAll=function(b){angular.forEach(a.products,function(a){a.priority=b})},a.logout=function(){d.logout(function(){c.go("login")})}}]).controller("LoginController",["$scope","$state","Auth",function(a,b,c){a.error="",a.login=function(){c.login({username:a.username,password:a.passwd},function(){b.go("index")},function(b){a.error="Login incorreto"})}}]).controller("StatusController",["$scope","$http",function(a,b){a.products=[],a.currentPage=0,a.pageSize=10,b.get("/list/").success(function(b){a.products=b.products}),a.numberOfPages=function(){return Math.ceil(a.products.length/a.pageSize)}}]).filter("startFrom",function(){return function(a,b){return b=+b,a.slice(b)}})},{}],2:[function(a,b,c){"use strict";angular.module("svApp",["ui.router","ngCookies"],function(a){a.startSymbol("{[{"),a.endSymbol("}]}")}).config(function(a,b,c){a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken",b.state("index",{url:"/",templateUrl:"/static/templates/index.html",controller:"PriorityController"}).state("status",{url:"/status/",templateUrl:"/static/templates/status.html",controller:"StatusController"}).state("login",{url:"/login/",templateUrl:"/static/templates/login.html",controller:"LoginController"}).state("logout",{url:"/logout/",controller:"LogoutController"}),c.otherwise("/")}).factory("Auth",["$cookieStore","$http",function(a,b){var c=a.get("svtch_usr")||0,d=["login"];return{login:function(d,e,f){b.post("/login/",d).success(function(){a.put("svtch_usr",1),c=1,e()}).error(f)},logout:function(d){b.get("/logout/").success(function(){a.remove("svtch_usr"),c=0,d()})},authorize:function(a){return this.isLoggedIn()&&d.indexOf(a)<0||!this.isLoggedIn()&&d.indexOf(a)>=0},isLoggedIn:function(){return c}}}]).run(["$rootScope","$state","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d,e,f){c.authorize(d.name)||(a.preventDefault(),"^"===f.url&&(c.isLoggedIn()?b.go("index"):b.go("login")))})}])},{}]},{},[2,1]);