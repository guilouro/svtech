
/*
 * -------------------------------------------------------
 * Project: Project Title
 * Version: 0.1.0
 * Author:  Author name (author@email.com)
 *
 * Copyright (c) 2015 Project Title
 * -------------------------------------------------------
 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){angular.module("svApp").controller("PriorityController",["$scope","$http",function(a,b){a.products={},a.select_all=!1,b.get("/list/").success(function(b){a.products=b.products}),a.setPriority=function(){b.post("/setpriority/",{products:a.products}).then(function(a){console.log(a)}),console.log(a.products)},a.checkAll=function(b){angular.forEach(a.products,function(a){a.priority=b})}}]).controller("LoginController",["$scope","Auth",function(a,b){a.login=function(){b.login({username:a.username,password:a.passwd},function(){$state.go("index.main")},function(a){console.log(a)}),console.log(a.username,a.passwd)}}])},{}],2:[function(a,b,c){"use strict";angular.module("svApp",["ui.router","ngCookies"],function(a){a.startSymbol("{[{"),a.endSymbol("}]}")}).config(function(a,b,c){a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken",b.state("index",{url:"/",templateUrl:"/static/templates/index.html",controller:"PriorityController"}).state("login",{url:"/login/",templateUrl:"/static/templates/login.html",controller:"LoginController"}),c.otherwise("/")}).factory("Auth",["$cookieStore","$http",function(a,b){var c=a.get("login")||0,d=["login"];return{login:function(a,d,e){b.post("/login/",a).success(function(){c=1,d()}).error(e)},authorize:function(a){return this.isLoggedIn()&&d.indexOf(a)<0||!this.isLoggedIn()&&d.indexOf(a)>=0},isLoggedIn:function(){return!!c}}}]).run(["$rootScope","$state","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d,e,f){console.log(a,d,e,f),c.authorize(d.name)||(a.preventDefault(),"^"===f.url&&(c.isLoggedIn()?b.go("index"):b.go("login")))})}])},{}]},{},[2,1]);